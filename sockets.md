#  Ёбаные сокеты или PubsubHUB

Как это дерьмо работает

## У тебя есть 2 залупы

- Подписка на топик: `->on('ёбаный_топик', $payload => $some->fuckin->action($payload))`
- Отправка в топик: `->emit('ёбаный_топик', { ёбаный: пейлоад})`

## На примере двух ёбаных топиков:

Есть ёбаные топики:
- ебать
- колотить

В них отправляются ёбаные пейлоады

```php
$this->ёбаный_клиент->отправка("ебать", ["кого" => $kogo, "как" => $kak]);
```

```json
[
  {
    "ёбаный_топик": "ебать",
    "ёбаный_пейлоад": {
      "кого": "...",
      "как": "..."
    }
  },
  {
    "ёбаный_топик": "колотить",
    "ёбаный_пейлоад": {
      "что": "...",
      "чем": "..."
    }
  }
]
```

И есть пиздюки, которые читают эти топики, ебут и колотят:
```php
$this->ёбаный_клиент->подписка('ебать', $payload => ебать($payload));
$this->ёбаный_клиент->подписка('колотить', $payload => колотить($payload));
```

## Как связать ёбаный Redis с ёбаными веб-сокетами

Если гавнокодить на псевдокоде, то так:

```php
$this->ёбаный_редис->подписка($ёбаный_пейлоад, $this->ёбаный_сокет->отправка($ёбаный_пейлоад));
$this->ёбаный_сокет->подписка($ёбаный_пейлоад, $this->ёбаный_редис->отправка($ёбаный_пейлоад));
```

### + нужно будет фильровать ёбаные пейлоады, по отправителю,

*Copilot продолжает:* чтобы не было зацикливания и прочей хуйни, а то будет ёбаный ад нахуй с ёбаными пейлоадами, которые будут хуяриться туда-сюда, пока не упадёт сервер или не умрёт ёбаный Redis

## Ёбаное заключение

- Ёбаный Redis - это ёбаный брокер сообщений
- Ёбаный сокет - это ёбаный клиент, который подписывается на ёбаные топики и отправляет ёбаные пейлоады в ёбаный Redis
- Ёбаный клиент - это ёбаный клиент, который подписывается на ёбаные топики и отправляет ёбаные пейлоады в ёбаный сокет
- Ёбаный пейлоад - это ёбаный массив, который содержит ёбаные данные, которые нужно отправить в ёбаный топик
- Ёбаный топик - это ёбаная строка, которая содержит ёбаное название топика, в который нужно отправить ёбаный пейлоад

## Ёбаные ссылки

- [Ёбаный Redis](https://redis.io/)
- [Ёбаный Pubsub](https://redis.io/topics/pubsub)
- [Ёбаный сокет](https://socket.io/)
- [Ёбаный клиент](https://socket.io/docs/v4/client-api/)
- [Ёбаный пейлоад](https://ru.wikipedia.org/wiki/%D0%9F%D0%B5%D0%B9%D0%BB%D0%BE%D1%83%D0%B4)
- [Ёбаный топик](https://ru.wikipedia.org/wiki/%D0%A2%D0%BE%D0%BF%D0%B8%D0%BA_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0))
- [Ёбаный брокер сообщений](https://ru.wikipedia.org/wiki/%D0%91%D1%80%D0%BE%D0%BA%D0%B5%D1%80_%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B9)
- [Ёбаный ад нахуй](https://ru.wikipedia.org/wiki/%D0%90%D0%B4_%D0%BD%D0%B0%D1%85%D1%83%D0%B9)
